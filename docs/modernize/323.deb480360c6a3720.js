"use strict";(self.webpackChunktestApp=self.webpackChunktestApp||[]).push([[323],{6323:(z,b,l)=>{l.r(b),l.d(b,{AuthenticationModule:()=>x});var m=l(8498),h=l(177),w=l(9213),c=l(5596),p=l(9631),M=l(2765),g=l(8834),s=l(9417),k=l(4912),I=l(5509),d=l(467),e=l(4438),f=l(8707),u=l(6467);const y=()=>["/authentication/register"];function F(n,L){if(1&n&&(e.j41(0,"p",18),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}let v=(()=>{class n{constructor(t,o){this.usersService=t,this.router=o,this.email="",this.password="",this.errorMessage=""}handleSubmit(){var t=this;return(0,d.A)(function*(){if(t.email&&t.password)try{const o=yield t.usersService.login(t.email,t.password);200==o.statusCode?(localStorage.setItem("token",o.token),localStorage.setItem("role",o.role),console.log("entre"),t.router.navigate(["/dashboard"])):t.showError(o.message)}catch(o){t.showError(o.message)}else t.showError("Email and Password is required")})()}showError(t){this.errorMessage=t,setTimeout(()=>{this.errorMessage=""},3e3)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(f.g),e.rXU(m.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gradient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","assets/images/logos/favicon.png","alt","logo",1,"align-middle","m-2"],[1,"or-border","m-t-30"],[3,"submit"],["class","error-message",4,"ngIf"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","name","email",3,"ngModelChange","ngModel"],["matInput","","type","password","name","password",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","m-b-12"],["color","primary"],["mat-flat-button","","color","primary",1,"w-100"],[1,"error-message"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),e.nrm(7,"img",7),e.k0s()(),e.j41(8,"div",8),e.EFF(9,"Iniciar Sesi\xf3n"),e.k0s(),e.j41(10,"form",9),e.bIt("submit",function(){return r.handleSubmit()}),e.DNE(11,F,2,1,"p",10),e.j41(12,"mat-label",11),e.EFF(13,"Email"),e.k0s(),e.j41(14,"mat-form-field",12)(15,"input",13),e.mxI("ngModelChange",function(a){return e.DH7(r.email,a)||(r.email=a),a}),e.k0s()(),e.j41(16,"mat-label",11),e.EFF(17,"Contrase\xf1a"),e.k0s(),e.j41(18,"mat-form-field",12)(19,"input",14),e.mxI("ngModelChange",function(a){return e.DH7(r.password,a)||(r.password=a),a}),e.k0s()(),e.j41(20,"div",15)(21,"mat-checkbox",16),e.EFF(22,"Recordar"),e.k0s()(),e.j41(23,"button",17),e.EFF(24,"Iniciar"),e.k0s()()()()()()()),2&o&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(4,y)),e.R7$(5),e.Y8G("ngIf",r.errorMessage),e.R7$(4),e.R50("ngModel",r.email),e.R7$(4),e.R50("ngModel",r.password))},dependencies:[h.bT,m.Wk,c.RN,c.m2,p.fg,u.rl,u.nJ,M.So,g.$z,s.qT,s.me,s.BC,s.cb,s.vS,s.cV],encapsulation:2})}return n})();const S=()=>["/dashboard"],j=()=>["/authentication/login"];function R(n,L){if(1&n&&(e.j41(0,"p",19),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}let E=(()=>{class n{constructor(t,o){this.userService=t,this.router=o,this.formData={name:"",email:"",password:"",role:""},this.errorMessage=""}handleSubmit(){var t=this;return(0,d.A)(function*(){if(t.formData.name&&t.formData.email&&t.formData.password){if(confirm("\xbfConfirmar registro?")){t.formData.role||(t.formData.role="USER");try{const r=localStorage.getItem("token");if(!r)throw new Error("No se encontr\xf3 ning\xfan token");const i=yield t.userService.register(t.formData,r);200===i.statusCode?t.router.navigate(["/dashboard"]):t.showError(i.message)}catch(r){t.showError(r.message)}}}else t.showError("Inserte todos los datos")})()}showError(t){this.errorMessage=t,setTimeout(()=>{this.errorMessage=""},3e3)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(f.g),e.rXU(m.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-register"]],decls:30,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","./assets/images/logos/favicon.png","alt","logo",1,"align-middle","m-2"],["class","error-message",4,"ngIf"],[1,"or-border","m-t-30"],[1,"m-t-30",3,"submit"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["type","text","name","name","required","","matInput","",3,"ngModelChange","ngModel"],["type","email","name","email","required","","matInput","",3,"ngModelChange","ngModel"],["name","password","required","","matInput","","type","password",3,"ngModelChange","ngModel"],["type","submit","mat-flat-button","","color","primary",1,"w-100"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"],[1,"error-message"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),e.nrm(7,"img",7),e.k0s()(),e.DNE(8,R,2,1,"p",8),e.j41(9,"div",9),e.EFF(10,"Registrar Usuario"),e.k0s(),e.j41(11,"form",10),e.bIt("submit",function(){return r.handleSubmit()}),e.j41(12,"mat-label",11),e.EFF(13,"Nombre"),e.k0s(),e.j41(14,"mat-form-field",12)(15,"input",13),e.mxI("ngModelChange",function(a){return e.DH7(r.formData.name,a)||(r.formData.name=a),a}),e.k0s()(),e.j41(16,"mat-label",11),e.EFF(17,"Email"),e.k0s(),e.j41(18,"mat-form-field",12)(19,"input",14),e.mxI("ngModelChange",function(a){return e.DH7(r.formData.email,a)||(r.formData.email=a),a}),e.k0s()(),e.j41(20,"mat-label",11),e.EFF(21,"Password"),e.k0s(),e.j41(22,"mat-form-field",12)(23,"input",15),e.mxI("ngModelChange",function(a){return e.DH7(r.formData.password,a)||(r.formData.password=a),a}),e.k0s()(),e.j41(24,"button",16),e.EFF(25," Registrar "),e.k0s()(),e.j41(26,"span",17),e.EFF(27,"Ya tienes una Cuenta? "),e.j41(28,"a",18),e.EFF(29," Sign In"),e.k0s()()()()()()()),2&o&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(6,S)),e.R7$(2),e.Y8G("ngIf",r.errorMessage),e.R7$(7),e.R50("ngModel",r.formData.name),e.R7$(4),e.R50("ngModel",r.formData.email),e.R7$(4),e.R50("ngModel",r.formData.password),e.R7$(5),e.Y8G("routerLink",e.lJ4(7,j)))},dependencies:[h.bT,m.Wk,c.RN,c.m2,p.fg,u.rl,u.nJ,g.$z,s.qT,s.me,s.BC,s.cb,s.YS,s.vS,s.cV],encapsulation:2})}return n})();const C=()=>["/dashboard"],D=n=>({id:n}),_=n=>["/authentication/actualizar/",n];let A=(()=>{class n{toggleBadgeVisibility(){this.hidden=!this.hidden}constructor(t,o){this.userService=t,this.router=o,this.hidden=!1,this.errorMessage=""}ngOnInit(){var t=this;return(0,d.A)(function*(){try{const o=localStorage.getItem("token");if(!o)throw new Error("No Token Found");t.profileInfo=yield t.userService.getYourProfile(o)}catch(o){t.showError(o.message)}})()}showError(t){this.errorMessage=t,setTimeout(()=>{this.errorMessage=""},3e3)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(f.g),e.rXU(m.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],decls:24,vars:12,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","assets/images/logos/favicon.png","alt","logo",1,"align-middle","m-2"],[1,"or-border","m-t-6"],[1,"text-center","m-t-30"],["src","/assets/images/profile/user-1.jpg","width","80",1,"rounded-circle","object-cover"],[1,"m-t-30"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),e.nrm(7,"img",7),e.k0s()(),e.j41(8,"div",8),e.EFF(9,"Perfil"),e.k0s(),e.j41(10,"div",9)(11,"a",6),e.nrm(12,"img",10),e.k0s()(),e.j41(13,"form",11)(14,"mat-label",12),e.EFF(15),e.k0s(),e.j41(16,"mat-label",12),e.EFF(17),e.k0s(),e.j41(18,"mat-label",12),e.EFF(19),e.k0s()(),e.j41(20,"span",13),e.EFF(21,"Actualizar Datos? "),e.j41(22,"a",14),e.EFF(23," Actualizar "),e.k0s()()()()()()()),2&o&&(e.R7$(6),e.Y8G("routerLink",e.lJ4(6,C)),e.R7$(5),e.Y8G("routerLink",e.lJ4(7,C)),e.R7$(4),e.SpI("Nombre: ",null==r.profileInfo||null==r.profileInfo.ourUsers?null:r.profileInfo.ourUsers.name,""),e.R7$(2),e.SpI("Email: ",null==r.profileInfo||null==r.profileInfo.ourUsers?null:r.profileInfo.ourUsers.email,""),e.R7$(2),e.SpI(" Rol: ","USER"===(null==r.profileInfo||null==r.profileInfo.ourUsers?null:r.profileInfo.ourUsers.role)?"Docente":null==r.profileInfo||null==r.profileInfo.ourUsers?null:r.profileInfo.ourUsers.role," "),e.R7$(3),e.Y8G("routerLink",e.eq3(10,_,e.eq3(8,D,null==r.profileInfo||null==r.profileInfo.ourUsers?null:r.profileInfo.ourUsers.id))))},dependencies:[m.Wk,c.RN,c.m2,u.nJ,s.qT,s.cb,s.cV],encapsulation:2})}return n})();const U=()=>["/dashboard"];let P=(()=>{class n{constructor(t,o,r){this.userService=t,this.router=o,this.route=r,this.userData={},this.userPassword="",this.errorMessage=""}ngOnInit(){this.getUserById()}getUserById(){var t=this;return(0,d.A)(function*(){t.userId=t.route.snapshot.paramMap.get("id");const o=localStorage.getItem("token");if(t.userId&&o)try{let r=yield t.userService.getUsersById(t.userId,o);const{name:i,email:a}=r.ourUsers;t.userData={name:i,email:a}}catch(r){t.showError(r.message)}else t.showError("User ID or Token is required")})()}updateUser(){var t=this;return(0,d.A)(function*(){if(confirm("Are you sure you want to update this user?"))try{const r=localStorage.getItem("token");if(!r)throw new Error("Token not found");""!==t.userPassword.trim()&&(t.userData.password=t.userPassword),t.userData.role=localStorage.getItem("role"),console.log("Updating user with data:",t.userData);const i=yield t.userService.updateUSer(t.userId,t.userData,r);console.log(i),200===i.statusCode?t.router.navigate(["/authentication/login"]):t.showError(i.message)}catch(r){t.showError(r.message)}})()}showError(t){this.errorMessage=t,setTimeout(()=>{this.errorMessage=""},3e3)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(f.g),e.rXU(m.Ix),e.rXU(m.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-updateuser"]],decls:25,vars:5,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light-primary"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-54"],[1,"or-border"],[1,"text-center","m-t-30"],[3,"routerLink"],["src","/assets/images/profile/user-1.jpg","width","80",1,"rounded-circle","object-cover"],[1,"m-t-30",3,"ngSubmit"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["type","text","id","name","name","name","required","","matInput","",3,"ngModelChange","ngModel"],["type","text","id","email","name","email","required","","matInput","",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","matInput","",3,"ngModelChange","ngModel"],["type","submit","mat-flat-button","","color","primary",1,"w-100"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5),e.EFF(6,"Actualizar"),e.k0s(),e.j41(7,"div",6)(8,"a",7),e.nrm(9,"img",8),e.k0s()(),e.j41(10,"form",9),e.bIt("ngSubmit",function(){return r.updateUser()}),e.j41(11,"mat-label",10),e.EFF(12,"Nombre"),e.k0s(),e.j41(13,"mat-form-field",11)(14,"input",12),e.mxI("ngModelChange",function(a){return e.DH7(r.userData.name,a)||(r.userData.name=a),a}),e.k0s()(),e.j41(15,"mat-label",10),e.EFF(16,"Email"),e.k0s(),e.j41(17,"mat-form-field",11)(18,"input",13),e.mxI("ngModelChange",function(a){return e.DH7(r.userData.email,a)||(r.userData.email=a),a}),e.k0s()(),e.j41(19,"mat-label",10),e.EFF(20,"Nueva Contrase\xf1a"),e.k0s(),e.j41(21,"mat-form-field",11)(22,"input",14),e.mxI("ngModelChange",function(a){return e.DH7(r.userPassword,a)||(r.userPassword=a),a}),e.k0s()(),e.j41(23,"button",15),e.EFF(24,"Actualizar"),e.k0s()()()()()()()),2&o&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(4,U)),e.R7$(6),e.R50("ngModel",r.userData.name),e.R7$(4),e.R50("ngModel",r.userData.email),e.R7$(4),e.R50("ngModel",r.userPassword))},dependencies:[m.Wk,c.RN,c.m2,p.fg,u.rl,u.nJ,g.$z,s.qT,s.me,s.BC,s.cb,s.YS,s.vS,s.cV],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;padding:20px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:15px}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;border:1px solid #ced4da;border-radius:5px}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:1rem;border:none;border-radius:5px;background-color:#007bff;color:#fff;cursor:pointer}.container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#010f20}"]})}return n})();const O=[{path:"",children:[{path:"login",component:v},{path:"register",component:E,canActivate:[l(9360).f]},{path:"profile",component:A},{path:"actualizar",component:P}]}];let x=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#r=this.\u0275inj=e.G2t({imports:[h.MD,m.iI.forChild(O),w.m_,c.Hu,p.fS,M.g7,g.Hl,s.YN,s.X1,k.X4.pick(I)]})}return n})()}}]);